/*!
 * @preserve
 * riveted.js | v0.5.0
 * Copyright (c) 2015 Rob Flaherty (@robflaherty)
 * Licensed under the MIT license
 */
var riveted=function(){function n(n){n=n||{},m=parseInt(n.reportInterval,10)||5,p=parseInt(n.idleTimeout,10)||30,I=n.gaGlobal||"ga","function"==typeof window[I]&&(y=!0),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(w=!0),"undefined"!=typeof dataLayer&&"function"==typeof dataLayer.push&&(T=!0),"function"==typeof n.eventHandler&&(f=n.eventHandler),"function"==typeof n.userTimingHandler&&(s=n.userTimingHandler),g="nonInteraction"in n&&(n.nonInteraction===!1||"false"===n.nonInteraction)?!1:!0,t(document,"keydown",v),t(document,"click",v),t(window,"mousemove",e(v,500)),t(window,"scroll",e(v,500)),t(document,"visibilitychange",o),t(document,"webkitvisibilitychange",o)}function e(n,e){var t,i,o,a=null,r=0,u=function(){r=new Date,a=null,o=n.apply(t,i)};return function(){var c=new Date;r||(r=c);var d=e-(c-r);return t=this,i=arguments,0>=d?(clearTimeout(a),a=null,r=c,o=n.apply(t,i)):a||(a=setTimeout(u,d)),o}}function t(n,e,t){n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent?n.attachEvent("on"+e,t):n["on"+e]=t}function i(){clearTimeout(E),r()}function o(){(document.hidden||document.webkitHidden)&&i()}function a(){b+=1,b>0&&b%m===0&&f(b)}function r(){R=!0,clearTimeout(_)}function u(){i(),L=!0}function c(){L=!1}function d(){R=!1,clearTimeout(_),_=setInterval(a,1e3)}function l(){var n=new Date,e=n-k;h=!0,s(e),_=setInterval(a,1e3)}function v(){L||(h||l(),R&&d(),clearTimeout(E),E=setTimeout(i,1e3*p+100))}var f,s,m,p,g,y,w,T,I,h=!1,R=!1,L=!1,b=0,k=new Date,_=null,E=null;return s=function(n){T?dataLayer.push({event:"RivetedTiming",eventCategory:"Riveted",timingVar:"First Interaction",timingValue:n}):(y&&window[I]("send","timing","Riveted","First Interaction",n),w&&_gaq.push(["_trackTiming","Riveted","First Interaction",n,null,100]))},f=function(n){T?dataLayer.push({event:"Riveted",eventCategory:"Riveted",eventAction:"Time Spent",eventLabel:n,eventValue:m,eventNonInteraction:g}):(y&&window[I]("send","event","Riveted","Time Spent",n.toString(),m,{nonInteraction:g}),w&&_gaq.push(["_trackEvent","Riveted","Time Spent",n.toString(),m,g]))},{init:n,trigger:v,setIdle:i,on:c,off:u}}();